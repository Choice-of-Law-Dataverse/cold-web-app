{
  "table_name": "Regional Instruments",
  "description": "Transformation rules for converting Regional Instruments table from current NocoDB format to reference format",
  "version": "1.0",
  "mappings": {
    "direct_mappings": {
      "source_table": "source_table",
      "id": "CoLD_ID",
      "rank": "rank",
      "ID": "CoLD_ID",
      "ID Number": "ID_Number",
      "Title": "Title",
      "Abbreviation": "Abbreviation",
      "Date": "Date",
      "URL": "URL",
      "Attachment": "Attachment",
      "Record ID": "ncRecordId",
      "Created": "Created",
      "Last Modified": "updated_at",
      "Last Modified By.id": "updated_by",
      "Created By.id": "created_by"
    },
    "conditional_mappings": {
      "sort_date": {
        "primary": "updated_at",
        "fallback": "result_date"
      }
    },
    "nested_mappings": {
      "related_specialists": {
        "source_array": "related_specialists",
        "array_operations": {
          "Specialists": {
            "operation": "join",
            "field": "Specialist",
            "separator": ","
          },
          "Specialists Link": {
            "operation": "join",
            "field": "ncRecordId",
            "separator": ","
          }
        }
      }
    },
    "complex_mappings": {
      "Literature": {
        "source_field": "Literature_Link",
        "type": "array_extract",
        "operation": "join_ids"
      },
      "Literature Link": {
        "source_field": "Literature_Link",
        "type": "array_extract", 
        "operation": "join_record_ids"
      },
      "Regional Legal Provisions": {
        "source_field": "Regional_Legal_Provisions_Link",
        "type": "array_extract",
        "operation": "join_display_values"
      },
      "Regional Legal Provisions Link": {
        "source_field": "Regional_Legal_Provisions_Link", 
        "type": "array_extract",
        "operation": "join_record_ids"
      }
    },
    "user_mappings": {
      "Last Modified By": {
        "source_field": "updated_by",
        "user_fields": {
          "Last Modified By.id": "id",
          "Last Modified By.email": "email",
          "Last Modified By.name": "name"
        }
      },
      "Created By": {
        "source_field": "created_by",
        "user_fields": {
          "Created By.id": "id",
          "Created By.email": "email",
          "Created By.name": "name"
        }
      }
    }
  },
  "post_processing": {
    "remove_null_values": true,
    "remove_empty_strings": false
  }
}
